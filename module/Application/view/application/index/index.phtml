<script type="text/javascript" src="//d3js.org/d3.v3.min.js"></script>
<script type="text/javascript" src="//cdn.jsdelivr.net/cal-heatmap/3.3.11/cal-heatmap.min.js"></script>
<script type="text/javascript" src="http://momentjs.com/downloads/moment-with-locales.min.js"></script>
<link rel="stylesheet" href="../css/cal-heatmap.css" />
<div class="index-body">
    <div class="row">
        <div class="index-cal-body">
            <div class="small-1 columns index-cal-arrow-body"><button id="cal_left"><img src="../images/arrow_left.png" /></button></div>
            <div class="small-10 columns" id="test2"></div>
            <div class="small-1 columns index-cal-arrow-body" style="text-align:right"><button id="cal_right"><img src="../images/arrow_right.png" /></button></div>
        </div>
    </div>
</div>    
<script>
    $(document).foundation();
    var cal = new CalHeatMap();
    cal.init({
        itemSelector: "#test2",
        domain: "month",
        subDomain: "x_day",
        data: "../data/calendar?startDate={{t:start}}&endDate={{t:end}}",
        dataType: "json",
        start: new Date(moment().year(), moment().month(), 0),
        cellSize: 30,
        cellPadding: 5,
        domainGutter: 30,
        range: 3,
        domainDynamicDimension: false,
        domainLabelFormat: function(date) {
            return moment(date).format("YYYY年MM月");
        },
        label: {
            position:'top',
        },
        previousSelector: "#cal_left",
        nextSelector: "#cal_right",
        subDomainTextFormat: "%d",
        subDomainTitleFormat: {
            empty:"无财报",
            filled:"{count}份财报",
        },
        legend: [10, 30, 50, 100],
        highlight:["now"],
    });
</script>
